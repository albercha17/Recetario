@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

/* ===================== */
/*       THEME DARK      */
/* ===================== */
:root{
  color-scheme: dark;
  /* fondo en capas para profundidad sutil */
  --bg: radial-gradient(1200px 600px at 20% -10%, #0b1220 0%, transparent 60%),
         radial-gradient(1200px 600px at 120% 10%, #1b2a44 0%, transparent 55%),
         #0a0f1a;
  --panel: rgba(18, 24, 38, 0.82);
  --panel-strong: rgba(18, 24, 38, 0.95);
  --card: rgba(22, 28, 44, 0.9);
  --card-hover: rgba(26, 34, 54, 1);
  --border: rgba(120, 139, 169, 0.22);
  --text: #e5eefb;
  --muted: #93a4c2;
  --badge: rgba(15, 23, 42, 0.55);
  --accent: #f97316;
  --accent-2: #facc15;
  --shadow-lg: 0 34px 70px rgba(0,0,0,.45);
  --shadow-md: 0 20px 46px rgba(0,0,0,.42);
  --radius-lg: 18px;
  --radius-md: 14px;
  --radius-sm: 10px;
  --t: 220ms cubic-bezier(.22,1,.36,1);

  /* el app.js rellena esto con la altura real del header */
  --header-h: 110px;
}

*{box-sizing:border-box}
html{-webkit-text-size-adjust:100%}
body{
  margin:0; min-height:100vh; background:var(--bg);
  color:var(--text); font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;
  display:flex; justify-content:center; overflow-x:hidden;
}
body.no-scroll{overflow:hidden}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* ===================== */
/*      APP SHELL        */
/* ===================== */
.app-shell{width:100%; max-width:1040px; padding:0 12px 56px}

/* Header fijo, glassy y compacto */
.app-header{
  position: fixed;
  top: env(safe-area-inset-top, 0px);
  left: 0; right: 0; z-index: 1000;
  background: var(--panel);
  backdrop-filter: blur(16px) saturate(1.1);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 10px 28px rgba(0,0,0,.32);
}

.app-header--compact{
  padding: 10px 12px;
  display: grid; gap: 8px;
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.header__brand{display:flex;align-items:center;gap:10px}
.logo-mark{
  width:28px;height:28px;border-radius:999px;object-fit:cover;
  border:1px solid rgba(255,255,255,.18); box-shadow:0 6px 18px rgba(0,0,0,.35);
  background:#0f172a;
}
.logo{font-weight:700;letter-spacing:-.01em;font-size:18px}
.tagline{margin:0;color:var(--muted);font-size:12px}

/* Controles */
.header__controls--compact{display:grid;grid-template-columns:1fr;gap:8px}

/* Buscador (16px para evitar zoom iOS) */
.search{
  position:relative;display:flex;align-items:center;gap:8px;
  padding:10px 12px 10px 40px;border-radius:14px;
  border:1px solid var(--border); background:rgba(255,255,255,.06);
}
.search__icon{position:absolute;left:12px;width:18px;height:18px;color:#a9b4cc}
.search input{
  flex:1;border:0;background:transparent;outline:none;
  font:inherit;font-size:16px;color:var(--text);
}
.search input::placeholder{color:#9db0cc}

/* Filtros → pastillas desplazables */
.filter-group{
  display:flex;gap:8px;padding:6px;border-radius:999px;
  background:rgba(255,255,255,.04);border:1px solid var(--border);
  overflow-x:auto;-webkit-overflow-scrolling:touch;
}
.filter-group::-webkit-scrollbar{display:none}
.filter-button{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:999px;border:1px solid var(--border);
  background:rgba(255,255,255,.06);color:#c6d2e8;font-weight:700;font-size:12px;
}
.filter-button.is-active{
  color:#101010;border-color:transparent;
  background:linear-gradient(135deg,var(--accent),#fb923c 60%,var(--accent-2));
}
.filter-button__count{padding:2px 8px;border-radius:999px;background:rgba(255,255,255,.28);color:#102030}

/* Empuje para que no se tape la primera fila */
.content{
  padding-top: calc(var(--header-h) + 10px + env(safe-area-inset-top, 0px));
  display:grid;gap:12px;
}
.empty-state[hidden]{display:none!important}
.empty-state{
  display:grid;gap:8px;justify-items:center;text-align:center;
  padding:16px;border:1px dashed var(--border);border-radius:var(--radius-lg);
  background:rgba(255,255,255,.03);color:#cbd5e1;
}
.empty-state__icon{font-size:20px}

/* ===================== */
/*       CARD GRID       */
/* ===================== */
/* iPhone: mínimo 3 por fila */
.card-grid{
  display:grid;gap:10px;
  grid-template-columns: repeat(3, 1fr);
}
@media (min-width:600px){ .card-grid{grid-template-columns:repeat(4,1fr);gap:12px} }
@media (min-width:900px){ .card-grid{grid-template-columns:repeat(5,1fr);gap:14px} }

.recipe-card{
  position:relative;border:0;padding:0;border-radius:14px;
  background:var(--card);box-shadow:var(--shadow-md);overflow:hidden;cursor:pointer;
  transition:transform var(--t),box-shadow var(--t),background var(--t);
}
.recipe-card:active{transform:scale(.985)}
.recipe-card__image{
  position:relative;aspect-ratio:1/1;
  background:linear-gradient(135deg,rgba(59,130,246,.16),rgba(236,72,153,.16));
  display:flex;align-items:flex-end;justify-content:flex-start;overflow:hidden;
}
.recipe-card__image::after{
  content:"";position:absolute;inset:0;background-size:cover;background-position:center;background-repeat:no-repeat;
  transition:transform var(--t);transform:scale(1.02);
  filter:saturate(1.05) contrast(1.08);
}
.recipe-card[data-has-image="true"] .recipe-card__image::after{background-image:var(--image-url)}
.recipe-card__image::before{
  content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(8,12,20,0) 32%,rgba(8,12,20,.95) 100%);
}
.recipe-card__badge{
  position:absolute;top:8px;left:8px;z-index:2;
  padding:4px 10px;border-radius:999px;background:var(--badge);color:#e6ebf6;
  font-size:10px;font-weight:800;letter-spacing:.02em;text-transform:uppercase;
  border:1px solid rgba(255,255,255,.08)
}
.recipe-card__title{
  position:relative;z-index:2;padding:0 10px 10px;
  font-size:13px;font-weight:800;color:#f8fbff;line-height:1.2;text-shadow:0 1px 0 rgba(0,0,0,.25);
}
.recipe-card__placeholder{
  position:absolute;inset:0;display:grid;place-items:center;
  font-size:28px;font-weight:800;color:rgba(255,255,255,.75);z-index:1;
}

/* ===================== */
/*         MODAL         */
/* ===================== */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:10px;z-index:2000}
.modal.active{display:flex}
.modal__backdrop{position:absolute;inset:0;background:rgba(5,9,16,.6);backdrop-filter:blur(12px)}
.modal__panel{
  position:relative;width:min(100%,760px);max-height:100%;
  background:var(--panel-strong);border:1px solid var(--border);
  border-radius:16px 16px 0 0;overflow:hidden;display:flex;flex-direction:column;box-shadow:var(--shadow-lg);
}
.modal__close{
  position:absolute;top:10px;right:10px;width:36px;height:36px;border-radius:999px;
  border:1px solid var(--border);background:rgba(255,255,255,.06);color:#d2d9e6;display:grid;place-items:center;
}
.modal__body{display:grid;grid-template-columns:1fr;overflow-y:auto}
.modal__gallery{display:grid;gap:8px;padding:12px;background:rgba(255,255,255,.03)}
.modal__gallery img{width:100%;border-radius:12px;border:1px solid var(--border);object-fit:cover}
.modal__placeholder{display:grid;place-items:center;min-height:120px;padding:12px;border-radius:12px;border:1px dashed var(--border);color:#c3cee0;background:rgba(255,255,255,.03)}

.modal__content{padding:14px;display:grid;gap:12px}
.modal__content h2{margin:0;font-size:18px}
.modal__type{margin:0;color:var(--accent);font-weight:800;font-size:11px;text-transform:uppercase}
.sections{display:grid;gap:12px}
.recipe-section{
  display:grid;gap:8px;padding:12px;border:1px solid var(--border);
  background:rgba(255,255,255,.04);border-radius:12px;color:#d7e3f5;
}
.recipe-section h3{margin:0;font-size:14px}
.recipe-section ul{margin:0;padding-left:16px;display:grid;gap:4px;color:#c3cee0}
.recipe-section p{margin:0;color:#c3cee0}

/* Botón principal (solo en modal) con barra fija en iPhone */
.modal__actions{display:flex;gap:10px}
.button{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:var(--text);font-weight:800;text-decoration:none}
.button--primary{background:linear-gradient(135deg,var(--accent),#fb923c);color:#111827;border-color:transparent}
.button svg{width:18px;height:18px}

/* iPhone: barra inferior fija + hueco para safe area */
@media (max-width:600px){
  .modal__content{padding-bottom:calc(90px + env(safe-area-inset-bottom,0px))}
  .modal__actions{
    position:fixed;left:0;right:0;bottom:0;z-index:2200;
    padding:10px 12px calc(10px + env(safe-area-inset-bottom,0px));
    background:linear-gradient(180deg,rgba(10,15,26,0) 0%, rgba(10,15,26,.86) 24%, rgba(10,15,26,.98) 100%);
    backdrop-filter:blur(14px);
    border-top:1px solid var(--border);
    justify-content:center;
  }
  .modal__actions .button{flex:1;min-height:44px;font-size:16px}
}

/* Hover (solo desktop) */
@media (hover:hover){
  .recipe-card:hover{transform:translateY(-2px);box-shadow:0 14px 30px rgba(0,0,0,.55)}
}
@media (prefers-reduced-motion:reduce){
  *{transition-duration:0ms!important;animation-duration:0ms!important}
}
